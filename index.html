<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 4.01 Transitional//EN" 
     "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   

    <title>calculator</title>
 

  <script type="text/javascript">
  
    function calculate(it){
      var this_it = it ;
       //  alert(this_it );

         
     
          this_it = this_it.replace(/asin/g , "as");  //第 1 次取代(與 sin 沖)
          this_it = this_it.replace(/acos/g , "ac");  //第 1 次取代(與 cos 沖) 
          this_it = this_it.replace(/atan/g , "aa");  //第 1 次取代(與 tan 沖 at 與 Math 沖)
          this_it = this_it.replace(/Tdeg/g , "(180/3.141592653589793*");  //轉 度數 asin acos atan
          this_it = this_it.replace(/sin/g , "Math.sin");  //取代
          this_it = this_it.replace(/cos/g , "Math.cos");  //取代 
          this_it = this_it.replace(/tan/g , "Math.tan");  //取代 
          this_it = this_it.replace(/sqrt/g , "Math.sqrt");  //取代
          this_it = this_it.replace(/exp/g , "Math.exp");  //取代 
          this_it = this_it.replace(/ln/g , "Math.log");  //取代   ???/ln log
          this_it = this_it.replace(/deg\(/g , "((3.141592653589793/180) *");   //取代 replace

          this_it = this_it.replace(/as/g , "Math.asin");  //第 2 次取代(與 sin 沖)
          this_it = this_it.replace(/ac/g , "Math.acos");  //第 2 次取代(與 cos 沖) 
          this_it = this_it.replace(/aa/g , "Math.atan");  //第 2 次取代(與 tan 沖 at 與 Math 沖)

     //   document.getElementById('input').value = eval(this_it);

 
        var power_n = document.getElementById('input2').value;

        var data_n=Math.pow(10,power_n);

        document.getElementById('input').value = Math.round(eval(this_it)*data_n)/data_n;
 
          //初值:計算到小數點第6位
       

                          }

</script>

</head>
<body onload="document.getElementById('input').focus()">
<form id="calc">
<table id="mytable" border="1" marginheight="0" marginwidth="0" >
       <tr><td colspan="8" rowspan="5" align="center" height="50" >A Javacsript calculator 
       <textarea id="input" rows="5" cols="42" ></textarea></td></tr>
       <tr></tr>
       <tr></tr>
       <tr></tr>
       <tr></tr>
       <tr><td><input type="button" id="one" value="1" OnClick="calc.input.value +='1'" ></td>
           <td><input type="button" id="two" value="2" OnClick="calc.input.value +='2'" ></td>
           <td><input type="button" id="three" value="3" OnClick="calc.input.value +='3'" ></td>
           <td><input type="button" id="plus" value="+" OnClick="calc.input.value +='+'" ></td>
           <td><input type="button" id="sin" value="sin" OnClick="calc.input.value +='sin('" ></td>
           <td><input type="button" id="cos" value="cos" OnClick="calc.input.value +='cos('" ></td>
           <td><input type="button" id="tan" value="tan" OnClick="calc.input.value +='tan('" ></td>
           <td><input type="button" id="deg" value="deg" OnClick="calc.input.value +='deg('" ></td></tr>
       <tr><td><input type="button" id="four" value="4" OnClick="calc.input.value +='4'" ></td>
           <td><input type="button" id="five" value="5" OnClick="calc.input.value +='5'" ></td>
           <td><input type="button" id="six" value="6" OnClick="calc.input.value +='6'" ></td>
           <td><input type="button" id="minus" value="-" OnClick="calc.input.value +='-'" ></td>
           <td><input type="button" id="tdeg" value="Tdeg" OnClick="calc.input.value +='Tdeg('" ></td></tr>
           <td><input type="button" id="asin" value="asin" OnClick="calc.input.value +='asin('" ></td>
           <td><input type="button" id="acos" value="acos" OnClick="calc.input.value +='acos('" ></td>
           <td><input type="button" id="atan" value="atan" OnClick="calc.input.value +='atan('" ></td></tr>
       <tr><td><input type="button" id="sever" value="7" OnClick="calc.input.value +='7'" ></td>
           <td><input type="button" id="eight" value="8" OnClick="calc.input.value +='8'" ></td>
           <td><input type="button" id="nine" value="9" OnClick="calc.input.value +='9'" ></td>
           <td><input type="button" id="multiply" value="*" OnClick="calc.input.value +='*'" ></td>
           <td><input type="button" id="ln" value="ln" OnClick="calc.input.value +='ln('" ></td>
           <td><input type="button" id="exp" value="exp" OnClick="calc.input.value +='exp('" ></td>
           <td><input type="button" id="right" value="(" OnClick="calc.input.value +='('" ></td>
           <td><input type="button" id="left" value=")" OnClick="calc.input.value +=')'" ></td></tr>
        <tr><td><input type="button" id="dot" value="." OnClick="calc.input.value +='.'" ></td>
            <td><input type="button" id="zero" value="0" OnClick="calc.input.value +='0'" ></td>
            <td><input type="button" id="clear" value="c" OnClick="calc.input.value =''" ></td>
            <td><input type="button" id="pilus" value="/" OnClick="calc.input.value +='/'" ></td>
            <td><input type="button" id="pow" value="pow(b,e)" OnClick="calc.input.value +='pow('" ></td>
            <td><input type="button" id="sdot" value="," OnClick="calc.input.value +=','" ></td>
            <td><input type="button" id="allclear" value="ac" OnClick="calc.input.value =''" ></td>
            <td colspan="1" align="center"><input type="button" width="100"  id="equit" value = "="  OnClick="calculate(calc.input.value)" ></td></tr>
</table>
 
<br>計算小數點後位數:
  <input type="text" id="input2" size="2" maxlength="2" value=6></td></tr>


</form>
</body>
</html>
